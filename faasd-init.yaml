# OpenFaaS VM setup based on 
# https://blog.alexellis.io/containerd-development-multipass/?utm_source=pocket_mylist
package_update: true
package_upgrade: true
fqnd: faasd
packages:
  - runc
  - git

runcmd:
  - curl -sfL https://raw.githubusercontent.com/openfaas/faasd/master/hack/install.sh | sh -s -
  - systemctl status -l containerd --no-pager
  - journalctl -u faasd-provider --no-pager
  - systemctl status -l faasd-provider --no-pager
  - systemctl status -l faasd --no-pager
  - curl -sSLf https://cli.openfaas.com | sh
  - sleep 60 && journalctl -u faasd --no-pager
  - cat /var/lib/faasd/secrets/basic-auth-password | /usr/local/bin/faas-cli login --password-stdin
